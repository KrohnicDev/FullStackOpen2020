(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(20),t(4)),l=t(3),i=function(e){var n=e.addPerson,t=e.newName,a=e.newNumber,o=e.handleNameChange,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:",r.a.createElement("input",{value:t,onChange:o})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:a,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.persons,t=e.deletePerson,a=function(e){var a=e.target.value,r=n[a];window.confirm("Delete contact ".concat(r.name,"?"))&&t(r)};return 0===n.length?r.a.createElement("p",null,"No numbers found"):n.map((function(e,n){return r.a.createElement("div",{key:e.id},r.a.createElement("p",null,e.name," ",e.number,r.a.createElement("button",{value:n,onClick:a},"Delete")))}))},s=function(e){var n=e.filterText,t=e.handleFilterTextChange;return r.a.createElement("div",null,"filter:",r.a.createElement("input",{value:n,onChange:t}))},f=t(2),d=t.n(f),h="api/persons",p=function(e){return e.data},b=function(){return d.a.get(h).then(p)},v=function(e){return d.a.put(h+"/"+e.id,e).then(p)},g=function(e){return d.a.delete(h+"/"+e).then(p)},E=function(e){return d.a.post(h,e).then(p)},w=function(e){var n=e.message,t=e.type;return n&&t?r.a.createElement("div",{className:t+" notification"},n):null},C="error",j="info",y=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)({}),f=Object(l.a)(c,2),d=f[0],h=f[1],p=function(e,n){n(e.target.value)},y=Object(a.useState)(""),O=Object(l.a)(y,2),N=O[0],k=O[1],S=Object(a.useState)(""),x=Object(l.a)(S,2),P=x[0],T=x[1],D=Object(a.useState)(""),A=Object(l.a)(D,2),B=A[0],F=A[1],J=function(){b().then((function(e){o(e)})).catch((function(e){return I("Couldn't fetch persons from the server.",C)}))},L=B.length>1,W=L?t.filter((function(e){return e.name.toLowerCase().includes(B.toLowerCase())})):t,I=function(e,n){h({message:e,type:n}),setTimeout((function(){h({})}),5e3)};return Object(a.useEffect)(J,[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{message:d.message,type:d.type}),r.a.createElement(s,{filterText:B,handleFilterTextChange:function(e){return p(e,F)}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(i,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===N})),a={name:N,number:P};n?window.confirm("".concat(N," already exists in the phonebook. Do you want replace their number with a new one?"))&&v(Object(u.a)(Object(u.a)({},n),{},{number:P})).then((function(){return I("Updated ".concat(N),j)})).catch((function(e){console.log(e.response);var n=e.response,t=n?n.data.error:e.message;I("Couldn't update ".concat(N,". ").concat(t),C)})).finally(J):E(a).then((function(){return I("Added a new contact: ".concat(a.name),j)})).catch((function(e){var n=e.response,t=n?n.data.error:e.message;I(t,C)})).finally(J);k(""),T("")},newName:N,newNumber:P,handleNameChange:function(e){return p(e,k)},handleNumberChange:function(e){return p(e,T)}}),r.a.createElement("h2",null,"Numbers ",L?" (filtered)":""),r.a.createElement(m,{persons:W,deletePerson:function(e){g(e.id).then((function(){return I("".concat(e.name," deleted"),j)})).catch((function(){return I("Person not found",C)})).finally(J)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.fd91b305.chunk.js.map